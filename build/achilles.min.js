function callMe(){something++,angular.element("html").scope().$broadcast("somethingChanged")}!function(){"use strict";angular.module("achilles",["ngResource","ngSanitize","ui.bootstrap","rt.select2","textAngular"])}(),function(){"use strict";function a(a){a.interceptors.push("SpinnerHttpInterceptor")}function b(a,b){var c={response:function(a){return a.config.spinner&&b(function(){$("#loading-overlay").css("display","none")},150),a},responseError:function(c){return c.config.spinner&&b(function(){$("#loading-overlay").css("display","none")},150),a.reject(c)},request:function(a){return"GET"==a.method&&a.spinner&&$("#loading-overlay").css("display","block"),a}};return c}angular.module("achilles").config(a).factory("SpinnerHttpInterceptor",b),a.$inject=["$httpProvider"],b.$inject=["$q","$timeout"]}(),function(){"use strict";function a(a){a.decorator("taOptions",["taRegisterTool","$delegate",function(a,b){return a("colorRed",{iconclass:"fa fa-square red-text",action:function(){this.$editor().wrapSelection("forecolor","red")}}),a("colorBlue",{iconclass:"fa fa-square blue-text",action:function(){this.$editor().wrapSelection("forecolor","blue")}}),a("colorOrange",{iconclass:"fa fa-square orange-text",action:function(){this.$editor().wrapSelection("forecolor","orange")}}),a("colorGreen",{iconclass:"fa fa-square green-text",action:function(){this.$editor().wrapSelection("forecolor","green")}}),a("colorBlack",{iconclass:"fa fa-square",action:function(){this.$editor().wrapSelection("forecolor","black")}}),a("colorGrey",{iconclass:"fa fa-square grey-text",action:function(){this.$editor().wrapSelection("forecolor","lightgrey")}}),b.toolbar=[["bold","italics","underline","colorRed","colorOrange","colorGreen","colorBlue","colorBlack","colorGrey","ul","ol","redo","undo","clear"]],b}])}angular.module("achilles").config(a),a.$inject=["$provide"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){a.get(b.treatmentList(achillesConfig.patient),{spinner:!0}).then(function(a){h.treatments=a.data})}function g(){c.get(achillesConfig.process).then(function(a){h.user=a})}var h=this;h.baseUrl=b.baseUrl(),h.entries=[],h.loadEntries=f,h.process=achillesConfig.process,h.patient=achillesConfig.patient,h.reverse=!1,h.marginOptions=[{"class":"large-margins",label:"Grosse Abstände"},{"class":"small-margins",label:"Kleine Abstände"}],h.fontSizes=[{"class":"large-fonts",label:"Gross"},{"class":"medium-fonts",label:"Mittel"},{"class":"small-fonts",label:"Klein"}],h.checkEditPermission=d.checkEditPermission,h.loadEntries(),g(),console.log("maincontroller line 32 ")}angular.module("achilles").controller("MainController",a),a.$inject=["$http","urls","User","TreatmentPermission","EntryType"]}(),function(){"use strict";function a(a,b){a.ok=function(){b.close()},a.cancel=function(){b.dismiss("canceled")}}function b(a,b){a.presets=[{id:1,name:"SOAP"},{id:2,name:"Gynäkologische Untersuchung"},{id:3,name:"Vermicelles"},{id:4,name:"Schoggischuum"}],a.close=function(a){b.close(a)}}angular.module("achilles").controller("DeleteModalController",a).controller("PresetModalController",b),a.$inject=["$scope","$modalInstance"],b.$inject=["$scope","$modalInstance"]}(),function(){"use strict";function a(){function a(a,b,c){var d={};c.draggableHandle&&(d.handle=c.draggableHandle),b.draggable(d)}var b={restrict:"A",link:a};return b}angular.module("achilles").directive("draggable",a)}(),function(){"use strict";function a(a){function b(b,c,d){console.log(document.activeElement);var e=c.find("textarea");a(function(){console.log(document.activeElement),e.focus(),console.log("trying"),console.log(document.activeElement)},5e3),c.find("a").on("click",function(){console.log("focus"),e.select2("open")})}var c={link:b};return c}angular.module("achilles").directive("modalSelect2",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(){var a={restrict:"E",controller:b,controllerAs:"dc",scope:{},templateUrl:"../js/templates/textblock-widget.tpl.html"};return a}function b(a,b,c,d,e,f){function g(a){a&&(j.textGroups=b("filter")(i,{treatmentEntryType:a.id}),j.selectedGroup={})}function h(a){var b="";if(!angular.isDefined(a))return void j.showWidget(!1);b=angular.isArray(a)?a.map(function(a){return a.text}).join(" "):a;var d=c.getCurrentlyFocusedColumn(),f=c.getCurrentlyFocusedRow(),g=c.getCurrentlyFocusedEntry();d&&g&&(d.content+=b,e.save(f,g)),j.showWidget(!1)}var i,j=this;j.insertSelection=h,j.isVisible=d.getTextBlockWidgetVisibility,j.showWidget=d.showTextBlockWidget,d.addTypeObserverCallback(g),f.all().then(function(a){j.textGroups=i=a})}angular.module("achilles").directive("textBlockWidget",a),b.$inject=["$scope","$filter","CurrentFocus","WidgetVisibility","TreatmentRow","TextBlock"]}(),function(){"use strict";function a(){function a(a,b,c){c.$observe("show",function(){console.log("changed",c.show),a.showWidget=a.$eval(c.show)})}var c={restrict:"E",controller:b,controllerAs:"dc",link:a,scope:{showWidget:"="},templateUrl:"../js/templates/title-settings-widget.tpl.html"};return c}function b(a,b,c,d){function e(a,b){a.forEach(function(a){c.changeVisibility(a,h.user,b)})}function f(b,d,e){if(e.altKey){var f=a("filter")(h.entryTypes,function(a){return a!==b&&!a.hidden}).length>0;h.entryTypes.forEach(function(a){b!==a&&c.changeVisibility(a,h.user,!f)}),c.changeVisibility(b,h.user,!0)}else c.changeVisibility(b,h.user,d)}function g(){c.get(achillesConfig.process).then(function(a){h.user=a,b.all().then(function(b){c.setVisibleEntryTypes(b,a),h.entryTypes=b})})}var h=this;h.changeTypeStatus=f,h.changeAll=e,h.isVisible=d.getTitleSettingsWidgetVisibility,h.showWidget=d.showTitleSettingsWidget,g()}angular.module("achilles").directive("titleSettingsWidget",a),a.$inject=["$timeout"],b.$inject=["$filter","EntryType","User","WidgetVisibility"]}(),function(){"use strict";function a(a){function b(b,c,d,e){c.on("click",function(){e.isOpen()&&a(function(){c.find("li a").eq(0).focus()},150)}),c.on("keydown","li a",function(a){if(40==a.which){a.preventDefault();var b=$(this).parent().nextAll(":visible:not(.divider)").first().find("a"),c=$(this).parent().siblings().first().find("a");b.length?b.focus():c.focus()}if(38==a.which){a.preventDefault();var d=$(this).parent().prevAll(":visible:not(.divider)").first().find("a"),e=$(this).parent().siblings().last().find("a");d.length?d.focus():e.focus()}})}var c={require:"dropdown",link:b};return c}angular.module("achilles").directive("toggleFocus",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a,c,d,e,f,g,h,i){function j(a){return"true"==a?m.editable:m.readonly}function k(a,b,c,k){function m(c){b.html(j(c)).show(),e(b.contents())(a)}function n(b){angular.element(this).hasClass("ng-dirty")&&!a.row.locked&&i.save(a.row,a.entry),d(function(){a.entry.focused=!1},150),d.cancel(l)}function o(c){if(a.row.locked&&t(c))c.preventDefault();else if(c.ctrlKey&&c.shiftKey&&8==c.which){var e=b.parents(".row").prev().find("textarea:not(:disabled)"),f=b.parents(".row").next().find("textarea:not(:disabled)"),j=b.parents("treatment-entry").prev().find("textarea:not(:disabled)"),k=b.parents("treatment-entry").next().find("textarea:not(:disabled)");d(function(){e.length?e.eq(0).focus():j.length?j.eq(0).focus():f.length?f.eq(0).focus():k.eq(0).focus()},150),u.removeRow(a.row)}else c.ctrlKey&&13==c.which?(i.save(a.row,a.entry),h.addEntry(a.treatment.id,a.entry.type,a.treatment.entries)):!a.row.hasOwnLock&&t(c)&&g.lock(a.row)}function p(b){f.setCurrentFocus(a.column,a.row,a.entry),a.warning&&!a.warning.displayed&&(toastr.warning(a.warning.message),a.warning.displayed=!0),l=d(function(){g.check(a.row)},450),d(function(){a.entry.focused=!0},250)}function q(b){a.readonly()&&a.warning&&!a.warning.displayed&&(toastr.error(a.warning.message),a.warning.displayed=!0)}function r(a){if(!a.length)return null;var b=a[0];return s(b)}function s(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(3==c.nodeType){if(c.nodeValue.indexOf("*")>=0)return c}else{var d=s(c);if(d)return d}}return null}function t(a){return!(9==a.which||a.which>=37&&a.which<=40||a.ctrlKey&&65==a.which||a.ctrlKey&&67==a.which)}var u=(k[0],k[1]);a.columnClass="col-xs-"+c.width,b.on("blur",".ta-bind",n),b.on("keydown",".ta-bind",o),b.on("focus",".ta-bind",p),b.on("click",".ta-bind",q),c.$observe("editable",m),m(c.editable),a.$watch(f.getNewlyFocusedRow,function(c){if(c&&a.row.id==c.id){var d=b.find(".ta-bind:not(.ta-readonly)");d.eq(0).focus();var e=r(d);if(e){var f=document.createRange(),g=e.nodeValue.indexOf("*");f.setStart(e,g),f.setEnd(e,g+1);var h=window.getSelection();h.removeAllRanges(),h.addRange(f)}}})}var l,m={editable:'<div ng-class="columnClass"><div class="form-group"><div ng-model="content" ta-disabled="readonly()" text-angular ta-target-toolbars="toolbar-{{treatment.id}}-{{type.id}}"></div></div></div>',readonly:'<div ng-class="columnClass"><p ng-bind-html="readonlyContent" class="read-only-content"></p></div>'},n={restrict:"E",scope:{width:"@",column:"=",content:"=",readonly:"&",row:"=",uniqueId:"@",treatment:"=",warning:"=",type:"=",entry:"="},require:["^treatment","^treatmentEntry"],controller:b,link:k};return n}function b(a,b){a.readonlyContent=b.trustAsHtml(a.content)}angular.module("achilles").directive("treatmentColumn",a),a.$inject=["$http","urls","$timeout","$compile","CurrentFocus","Locking","Treatment","TreatmentRow"],b.$inject=["$scope","$sce"]}(),function(){"use strict";function a(){function a(a,b,c,d){a.removeEntry=d.removeEntry}var c={scope:{entry:"=",editable:"@",treatment:"=",permissionToEdit:"&",warning:"="},restrict:"E",templateUrl:"../js/templates/treatment-entry.tpl.html",require:"^treatment",controller:b,controllerAs:"dc",link:a};return c}function b(a,b,c,d,e){function f(a){return k.user.hiddenEntryTypes&&k.user.hiddenEntryTypes.indexOf(a.id)>-1}function g(){d.get(achillesConfig.process).then(function(a){k.user=a})}function h(b){a.entry.focused=b}function i(){a.entryform.$setPristine()}function j(d){var e=a.entry.rows;b.post(c.treatmentEntryRow("delete")+d.id).then(function(){for(var b=0;b<e.length;b++)if(e[b].id==d.id){e.splice(b,1);break}0===e.length&&a.removeEntry(a.entry)})}var k=this;k.isHidden=f,k.makePristine=i,k.removeRow=j,k.setEntryFocus=h,k.showTextBlockWidget=e.showTextBlockWidget,k.user={},g()}angular.module("achilles").directive("treatmentEntry",a),b.$inject=["$scope","$http","urls","User","WidgetVisibility"]}(),function(){"use strict";function a(a){function b(b,c){function d(){a(function(){var a=c.find(".ta-bind:not(.ta-readonly)").eq(0);a.focus()},150)}b.$watch("row.changed",function(a){a&&d()}),b.row["new"]===!0&&d()}var c={link:b};return c}angular.module("achilles").directive("treatmentRow",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(){var a={restrict:"E",controller:b,controllerAs:"toolbar",templateUrl:"../js/templates/treatment-toolbar.tpl.html"};return a}function b(a,b,c,d,e,f){function g(a){console.log("getting here");var c=a.length?b("orderBy")(a,["-date","id"])[0]:{id:0};d.addTreatment(c,!0,!0,a)}function h(a){var c,d,f,g,h=[];c=e.getCurrentlyFocusedRow(),a.forEach(function(a){if("true"===a.editable||a.editable===!0){var c=b("orderBy")(a.entries,"type.name");c.forEach(function(a){a.rows.forEach(function(a){h.push(a)})})}}),c?(console.log("here"),f=h.slice(h.indexOf(c)+1)):f=h,g=b("filter")(f,{$:"*"}),0===g.length&&(g=b("filter")(h,{$:"*"})),d=g.shift(),d&&e.setNewFocus(d)}function i(b){a.get(c.biometricReport(b))}function j(b){a.get(c.laboratoryReport(b))}function k(b,d){var e=[];d.forEach(function(a){console.log(a);var b={id:a.id,rows:[]};a.entries.forEach(function(a){a.rows.forEach(function(a){b.rows.push(a.id)})}),e.push(b)}),a.post(c.treatmentReport(b),e)}function l(b,d,e){a.post(c.executeGDT(b,d,e)).then(function(){console.log("that worked")})["catch"](function(){console.log("that didn't")})}function m(){a.get(c.gdtList()).then(function(a){n.gdtDevices=a.data})}var n=this;n.addTreatment=g,n.asteriskSearch=h,n.openBiometricReport=i,n.openLaboratoryReport=j,n.openTreatmentReport=k,n.executeGDT=l,n.showTitleSettingsWidget=f.showTitleSettingsWidget,m()}angular.module("achilles").directive("treatmentToolbar",a),b.$inject=["$http","$filter","urls","Treatment","CurrentFocus","WidgetVisibility"]}(),function(){"use strict";function a(a){function c(b,c,d,e){var f;b.treatment.editable=b.editable,c.on("keydown",function(a){120==a.which&&e.permissionToEdit&&c.find(".type-select input").select2("open"),121==a.which&&e.testModal()}),c.on("focusin",function(){a(function(){b.treatment.focused=!0,b.editable=!0,b.treatment.editable=!0}),a.cancel(f)}),c.on("focusout",function(){f=a(function(){b.treatment.focused=!1},300)}),c.on("select2-open",function(){b.select2Open=!0}),c.on("select2-blur",function(){b.select2Open=!1})}var d={scope:{treatment:"=",treatments:"=treatmentlist",editable:"@",user:"="},restrict:"E",controller:b,controllerAs:"dc",templateUrl:"../js/templates/treatment.tpl.html",link:c};return d}function b(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){a&&!r.documents&&j.list(s).then(function(a){r.documents=a},function(a){console.error(a.statusText),r.documents=[]})}function o(a){a&&!r.laboratoryReports&&k.list(s).then(function(a){r.laboratoryReports=a},function(){})}function p(a){a&&!r.biometrics&&l.list(s).then(function(a){r.biometrics=a},function(){})}function q(a){a&&!r.disabilityCertificates&&m.list(s).then(function(a){r.disabilityCertificates=a},function(){})}var r=this,s=a.treatment.id;r.newEntry={type:null},e.all().then(function(a){r.types=a}),i.all().then(function(a){r.subjects=a}),r.loadDocuments=n,r.loadLaboratoryReports=o,r.loadBiometrics=p,r.loadDisability=q,r.addEntry=h.addEntry,r.baseUrl=d.baseUrl(),r.addTreatment=h.addTreatment,r.copyTreatment=h.copyTreatment,r.deleteTreatment=h.deleteTreatment,r.changeStatus=h.changeStatus,r.changeSubject=h.changeSubject,r.removeCase=h.removeCase,r.warning={},r.permissionToEdit=!1,g.get().then(function(b){r.warning=f.shouldBeWarned(b,a.treatment),r.permissionToEdit=f.checkEditPermission(b,a.treatment)}),r.removeEntry=function(b){for(var c=a.treatment.entries,d=0;d<c.length;d++)if(b.type.id==c[d].type.id){c.splice(d,1);break}},r.testModal=function(){c.open({templateUrl:"../js/templates/preset-modal.tpl.html",controller:"PresetModalController",controllerAs:"mc",size:"lg"})}}angular.module("achilles").directive("treatment",a),a.$inject=["$timeout"],b.$inject=["$scope","$http","$modal","urls","EntryType","TreatmentPermission","User","Treatment","Subject","Document","LaboratoryReport","Biometric","DisabilityCertificate"]}();var something=0;toastr.options={positionClass:"toast-top-full-width"},function(){"use strict";function a(a,b){function c(c){return a.get(b.biometricList(c),{spinner:!0}).then(function(a){return a.data})}var d={list:c};return d}angular.module("achilles").service("Biometric",a),a.$inject=["$http","urls"]}(),function(){"use strict";function a(){function a(){return h}function b(){return i}function c(){return g}function d(){return j}function e(a,b,c){h=a,g=b,i=c}function f(a){j=a}var g,h,i,j,k={getCurrentlyFocusedColumn:a,getCurrentlyFocusedEntry:b,setCurrentFocus:e,getCurrentlyFocusedRow:c,setNewFocus:f,getNewlyFocusedRow:d};return k}angular.module("achilles").factory("CurrentFocus",a)}(),function(){"use strict";function a(a,b){function c(c){return a.get(b.disabilityList(c),{spinner:!0}).then(function(a){return a.data})}var d={list:c};return d}angular.module("achilles").service("DisabilityCertificate",a),a.$inject=["$http","urls"]}(),function(){"use strict";function a(a,b){function c(c){return a.get(b.documentList(c),{spinner:!0}).then(function(a){return a.data})}var d={list:c};return d}angular.module("achilles").service("Document",a),a.$inject=["$http","urls"]}(),function(){"use strict";function a(a,b,c){function d(){var d=b.defer();return f.length?d.resolve(f):g?h.push(d):(g=!0,a.get(c.treatmentEntryTypeList()).then(function(a){f=a.data;for(var b=0;b<f.length;b++)f[b].toString=function(){return this.id};g=!1,d.resolve(f),h.forEach(function(a){a.resolve(f)})})),d.promise}var e={all:d},f=[],g=!1,h=[];return e}angular.module("achilles").factory("EntryType",a),a.$inject=["$http","$q","urls"]}(),function(){"use strict";function a(a,b){function c(c){return a.get(b.laboratoryList(c),{spinner:!0}).then(function(a){return a.data})}var d={list:c};return d}angular.module("achilles").service("LaboratoryReport",a),a.$inject=["$http","urls"]}(),function(){"use strict";function a(a,b){function c(c){a.get(b.lock(c,achillesConfig.process)).then(function(a){var b=a.data;b.lock?(c.locked=!0,c.lockedBy=b.lockedBy):(c.locked=!1,b.row.lastChange>c.lastChange?(c.columns=b.row.columns,c["new"]=b.row["new"],c.changed=!0,c.lastChange=b.row.lastChange):0===b.row.id&&(c.id=0,c.deleted=!0))})}function d(c){var d={method:"POST",url:b.lock(c,achillesConfig.process,"put"),headers:{"Content-Type":"text/plain"}};a(d).then(function(a){204==a.status?c.hasOwnLock=!0:(c.lock=!0,c.lockedBy=a.data.lockedBy)})}var e={check:c,lock:d};return e}angular.module("achilles").factory("Locking",a),a.$inject=["$http","urls"]}(),function(){"use strict";function a(a,b,c){function d(){var d=b.defer();return f.length?d.resolve(f):g?h.push(d):(g=!0,a.get(c.treatmentSubject()).then(function(a){f=a.data,g=!1,d.resolve(f),h.forEach(function(a){a.resolve(f)})})),d.promise}var e={all:d},f=[],g=!1,h=[];return e}angular.module("achilles").service("Subject",a),a.$inject=["$http","$q","urls"]}(),function(){"use strict";function a(a,b,c){function d(){var d=b.defer();return f.length?d.resolve(f):g?h.push(d):(g=!0,a.get(c.textblock(achillesConfig.process)).then(function(a){f=a.data;for(var b=0;b<f.length;b++)f[b].toString=function(){return this.id};g=!1,d.resolve(f),h.forEach(function(a){a.resolve(f)})})),d.promise}var e={all:d},f=[],g=!1,h=[];return e}angular.module("achilles").factory("TextBlock",a),a.$inject=["$http","$q","urls"]}(),function(){"use strict";function a(){function a(a,b){return("warn"==a.permission.modifyRange.mode||c-24*a.permission.modifyRange.pastDays*60*60*1e3<b.date&&c+24*a.permission.modifyRange.futureDays*60*60*1e3>b.date)&&(!b.isMandatorTreatment&&!a.isMandator||a.permission.editMandatorEntry&&(!a.isMandator||b.mandator==a.mandator.id))}function b(b,d){return a(b,d)?"warn"==b.permission.modifyRange.mode&&(c-24*b.permission.modifyRange.pastDays*60*60*1e3>d.date||c+24*b.permission.modifyRange.futureDays*60*60*1e3<d.date)?{displayed:!1,message:"Behandlungseintrag liegt ausserhalb des änderbaren Bereichs"}:!1:b.permission.editMandatorEntry?d.mandator!=b.mandator.id?{displayed:!1,message:"Nur der verantwortliche Mandant darf den Text ändern"}:void 0:{displayed:!1,message:"Sie verfügen nicht über die notwendigen Benutzerrechte um diese Aktion auszuführen"}}var c=Date.now(),d={checkEditPermission:a,shouldBeWarned:b};return d}angular.module("achilles").factory("TreatmentPermission",a)}(),function(){"use strict";function a(a,b){function c(c,d){a.post(b.treatmentEntryRow("put"),c).then(function(a){for(var b=a.data,c=d.rows,e=0;e<c.length;e++)if(c[e].id==b.id){c[e]=b;break}b.locked=!1,b.hasOwnLock=!1})}var d={save:c};return d}angular.module("achilles").factory("TreatmentRow",a),a.$inject=["$http","urls"]}(),function(){"use strict";function a(a,b,c,d){function e(b,e,f){a.post(c.treatmentEntry(),{treatmentId:b,type:e}).then(function(a){for(var b=a.data,c=!1,g=0;g<f.length;g++)if(b.type.id==f[g].type.id){f[g]=b,c=!0;break}c||f.push(b),d.get().then(function(a){a.hiddenEntryTypes&&a.hiddenEntryTypes.indexOf(b.type.id)>-1&&d.changeVisibility(e,a)})})}function f(b,d,e,f){new Date;a.post(c.treatment(),{patient:achillesConfig.patient,process:achillesConfig.process,treatment:{id:b.id,isMandatorTreatment:d,isMainTreatment:e}}).then(function(a){f.push(a.data)})}function g(b,d){a.post(c.copyTreatment(),{process:achillesConfig.process,treatment:{id:b.id}}).then(function(a){d.push(a.data)})}function h(d,e){var f=b.open({templateUrl:"../js/templates/delete-modal.tpl.html",controller:"DeleteModalController",controllerAs:"mc",size:"sm"});f.result.then(function(){a.post(c.treatment("delete"),d).then(function(a){for(var b=0;b<e.length;b++)if(e[b].id==d.id){e.splice(b,1);break}})})}function i(b){b.closed=!b.closed,a.post(c.treatment("put"),b).then(function(a){b.closed=a.data.closed,console.log("treatment status changed")},function(a){b.closed=!b.closed})}function j(b,d){var e=b.subject;b.subject=d,a.post(c.treatment("put"),b).then(function(a){b.subject=a.data.subject},function(a){b.subject=e})}function k(b){var d=b.invoiceCase;b.invoiceCase={id:0,name:""},a.post(c.treatment("put"),b).then(function(a){b.invoiceCase=a.data.invoiceCase},function(){b.invoiceCase=d})}var l={addTreatment:f,copyTreatment:g,deleteTreatment:h,changeStatus:i,changeSubject:j,addEntry:e,removeCase:k};return l}angular.module("achilles").factory("Treatment",a),a.$inject=["$http","$modal","urls","User"]}(),function(){"use strict";function a(){function a(){return w+x+":"+y+"/"}function b(b){return a()+z.caseList.replace(/:([a-z]\w*)/gi,b)+"/"}function c(b,c,d){var e="";return d&&(e=d+"/"),a()+e+z.lock.replace(/:row/,b.id).replace(/:process/,c)+"/"}function d(b,c,d){return a()+(d?z.executeGDTTest:z.executeGDT).replace(/:device/,b.id).replace(/:patient/,c).replace(/:test/,d?d.code:"")+"/"}function e(b){return a()+z.textblock.replace(/:process/,b)+"/"}function f(b){return a()+z.treatmentlist.replace(/:([a-z]\w*)/gi,b)+"/"}function g(){return a()+z.treatmententrytype+"/"}function h(){return a()+z.treatmententry+"/"}function i(b){var c="";return b&&(c=b+"/"),a()+c+z.treatmententryrow+"/"}function j(){return a()+z.treatmentsubject+"/"}function k(b){var c="";return b&&(c=b+"/"),a()+c+z.treatment+"/"}function l(){return a()+z.copyTreatment+"/"}function m(b){return a()+z.documentList.replace(/:([a-z]\w*)/gi,b)+"/"}function n(){return a()+z.gdtList+"/"}function o(b){return a()+z.laboratoryList.replace(/:([a-z]\w*)/gi,b)+"/"}function p(b){return a()+z.biometricList.replace(/:([a-z]\w*)/gi,b)+"/"}function q(b){return a()+z.disabilityList.replace(/:([a-z]\w*)/gi,b)+"/"}function r(b){return a()+z.removeCase.replace(/:treatment/gi,b.id).replace(/:case/gi,b.invoiceCase.id)+"/"}function s(b){return a()+z.biometricReport.replace(/:process/gi,b)+"/"}function t(b){return a()+z.laboratoryReport.replace(/:process/gi,b)+"/"}function u(b){return a()+z.treatmentReport.replace(/:process/gi,b)+"/"}function v(b,c){return a()+(c?c+"/":"")+z.user.replace(/:process/,b)+"/"}var w="http://",x=achillesConfig.baseUrl,y=achillesConfig.port,z={biometricList:"treatment/:treatment/biometriclist",biometricReport:"biometricreport/process/:process",caseList:"treatment/:treatment/caselist",copyTreatment:"treatment/copy",disabilityList:"treatment/:treatment/disabilitylist",documentList:"treatment/:treatment/documentlist",laboratoryList:"treatment/:treatment/laboratorylist",laboratoryReport:"laboratoryreport/process/:process",removeCase:"treatment/:treatment/case/:case",treatmententry:"treatmententry",treatmententryrow:"treatmententryrow",treatmententrytype:"treatmententrytype",treatmentlist:"patient/:patient/treatmentlist",treatmentReport:"treatmentreport/process/:process",treatmentsubject:"treatmentsubject",treatment:"treatment",gdtList:"gdt/list",executeGDT:"gdt/:device/patient/:patient",executeGDTTest:"gdt/:device/patient/:patient/code/:test",lock:"treatmententryrow/lock/:row/process/:process",user:"user/process/:process",textblock:"textblock/process/:process"},A={baseUrl:a,biometricList:p,biometricReport:s,caseList:b,copyTreatment:l,disabilityList:q,documentList:m,laboratoryList:o,laboratoryReport:t,removeCase:r,treatmentEntryTypeList:g,treatmentEntry:h,treatmentEntryRow:i,treatmentList:f,treatmentSubject:j,treatment:k,treatmentReport:u,gdtList:n,executeGDT:d,lock:c,user:v,textblock:e};return A}angular.module("achilles").factory("urls",a)}(),function(){"use strict";function a(a,b,c,d){function e(){var c=b.defer();return h?c.resolve(h):j?k.push(c):(j=!0,a.get(d.user(l)).then(function(a){h=a.data,j=!1,c.resolve(h),k.forEach(function(a){a.resolve(h)})})),c.promise}function f(a,b){a.forEach(function(a){b.hiddenEntryTypes.indexOf(a.id)>-1&&(a.hidden=!0)})}function g(b,e,f){e.hiddenEntryTypes||(e.hiddenEntryTypes=[]);var g=e.hiddenEntryTypes,h=g.indexOf(b.id);void 0!==f?(f&&h>-1&&g.splice(h,1),f||-1!==h||g.push(b.id),b.hidden=!f):h>-1?(g.splice(h,1),b.hidden=!1):(g.push(b.id),b.hidden=!0),i&&0===i.$$state.status&&c.cancel(i),i=c(function(){a.post(d.user(l,"put"),e)},150)}var h,i,j=!1,k=[],l=achillesConfig.process,m={get:e,setVisibleEntryTypes:f,changeVisibility:g};return m}angular.module("achilles").factory("User",a),a.$inject=["$http","$q","$timeout","urls"]}(),function(){"use strict";function a(){function a(a){i.push(a)}function b(){return j.type}function c(){return j.visible}function d(){return h}function e(){i.forEach(function(a){a(j.type)})}function f(a,b){j.type=a?b:void 0,j.visible=a,e()}function g(a){h=a}var h=!1,i=[],j={visible:!1,type:void 0},k={addTypeObserverCallback:a,getTextBlockWidgetVisibility:c,getTextBlockType:b,getTitleSettingsWidgetVisibility:d,showTextBlockWidget:f,showTitleSettingsWidget:g};return k}angular.module("achilles").factory("WidgetVisibility",a)}();
//# sourceMappingURL=achilles.min.js.map